<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter version="5.0" xml:id="cluster.deployment"
 xmlns="http://docbook.org/ns/docbook"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
 <info>
  <title>&productname; System Requirements</title>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  This chapter specifies the requirements to install and operate &productname;.
   </para>
 <sect1 xml:id="sec.caasp.installquick.sysreqs">
  <title>System Requirements</title>

  <para>
   Before you begin the installation, please make sure your system meets all
   requirements listed below.
  </para>

  <sect2 xml:id="sec.caasp.installquick.hwreqs">
   <title>Minimum Hardware Requirements</title>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Any AMD64/Intel* EM64T processor (quad-core processors are recommended).
      32-bit processors are not supported.
     </para>
    </listitem>
    <listitem>
     <para>
      8 GB physical RAM per node.
     </para>
    </listitem>
    <listitem>
     <para>
      40 GB available disk space (or more depending on the count and size of
      container images you intend to run).
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.caasp.installquick.clusreqs">
   <title>Cluster Size Requirements</title>
   <para>
    &productname; only functions in a clustered configuration. It requires a
    group of physical or virtual machines in order to operate. The minimum
    supported cluster size is four nodes: one &admin_node;, one &master_node;,
    and two &worker_node;s.
   </para>
   <note>
    <title>Test and Proof-of-Concept Clusters</title>
    <para>
     It is possible to provision a three-node cluster with only a single
     &worker_node;, but this is not a supported configuration for deployment.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec.caasp.installquick.netreqs">
   <title>Network Requirements</title>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      All nodes should be on the same network.
     </para>
     <important>
      <title>Reliable Networking</title>
      <para>
       Please make sure all nodes can communicate without interruptions.
      </para>
     </important>
    </listitem>
    <listitem>
     <para>
      A DHCP server to dynamically provide IP addresses and host names for the
      nodes in your cluster (unless you configure all nodes statically).
     </para>
    </listitem>
    <listitem>
     <para>
      A DNS server to resolve host names. If you are using host names to
      specify nodes, please make sure you have reliable DNS resolution at all
      times, especially in combination with DHCP.
     </para>
     <important>
      <title>Unique Host Names</title>
      <para>
       Host names must be unique. It is recommended to let the DHCP server
       provide not only IP addresses but also host names of the cluster nodes.
      </para>
     </important>
    </listitem>
    <listitem>
     <para>
      In a &productname; cluster, internal TCP/IP ports are managed using
      <literal>iptables</literal> controlled by <literal>Salt</literal> and so
      need not be manually configured. However, for reference and for
      environments where there are existing security policies, the following
      are the standard ports in use.
     </para>
     <table xml:id="sec.caasp.installquick.ports">
      <title>Node types and open ports</title>
      <tgroup cols="6">
       <thead>
        <row>
         <entry>
          <para>
           Node
          </para>
         </entry>
         <entry>
          <para>
           Port
          </para>
         </entry>
         <entry>
          <para>
           Internal / External
          </para>
         </entry>
         <entry>
          <para>
           Open after orchestration
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Notes
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           All nodes
          </para>
         </entry>
         <entry>
          <para>
           22
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           ssh
          </para>
         </entry>
         <entry>
          <para>
           Useful but not essential
          </para>
         </entry>
        </row>
        <row>
         <entry morerows="4" valign="middle">
          <para>
           Admin
          </para>
         </entry>
         <entry>
          <para>
           80
          </para>
         </entry>
         <entry>
          <para>
           External
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           HTTP
          </para>
         </entry>
         <entry/>
        </row>
        <row>
         <entry>
          <para>
           389
          </para>
         </entry>
         <entry>
          <para>
           External
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           LDAP
          </para>
         </entry>
         <entry>
          <para>
           User management
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           443
          </para>
         </entry>
         <entry>
          <para>
           External
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           HTTPS
          </para>
         </entry>
         <entry/>
        </row>
        <row>
         <entry>
          <para>
           2379
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           <literal>etcd</literal> discovery
          </para>
         </entry>
         <entry/>
        </row>
        <row>
         <entry>
          <para>
           4505 - 4506
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           Salt
          </para>
         </entry>
         <entry/>
        </row>
        <row>
         <entry morerows="2" valign="middle">
          <para>
           Masters
          </para>
         </entry>
         <entry>
          <para>
           2380
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           Yes
          </para>
         </entry>
         <entry>
          <para>
           <literal>etcd</literal> control
          </para>
         </entry>
         <entry>
          <para>
           Peer-to-peer <literal>etcd</literal> traffic
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           4789
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           VXLAN traffic
          </para>
         </entry>
         <entry>
          <para>
           Used by Flannel
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           6443
          </para>
         </entry>
         <entry>
          <para>
           Both
          </para>
         </entry>
         <entry>
          <para>
           Yes
          </para>
         </entry>
         <entry>
          <para>
           &kube; API server
          </para>
         </entry>
         <entry/>
        </row>
        <row>
         <entry morerows="2" valign="middle">
          <para>
           Workers
          </para>
         </entry>
         <entry>
          <para>
           2380
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           Yes
          </para>
         </entry>
         <entry>
          <para>
           <literal>etcd</literal> control
          </para>
         </entry>
         <entry>
          <para>
           Peer-to-peer <literal>etcd</literal> traffic
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           4789
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           VXLAN traffic
          </para>
         </entry>
         <entry>
          <para>
           Used by Flannel
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           10250
          </para>
         </entry>
         <entry>
          <para>
           Internal
          </para>
         </entry>
         <entry>
          <para>
           No
          </para>
         </entry>
         <entry>
          <para>
           Kubelet
          </para>
         </entry>
         <entry/>
        </row>
       </tbody>
      </tgroup>
     </table>
    </listitem>
   </itemizedlist>
   <para>
    When some additional ingress mechanism is used, additional ports would also
    be open.
   </para>
  </sect2>

  <sect2 xml:id="sec.caasp.installquick.limits">
   <title>Limitations</title>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
<!-- cwickert 2017-04-06: FIXME - check if still applies
       https://bugzilla.suse.com/show_bug.cgi?id=1029317 
       jahalackova: that's still valid for 1.0.
       -->
     <para>
      &productname; &productnumber; does not support remote installations with
      <literal>Virtual Network Computing (VNC)</literal>.
     </para>
    </listitem>
    <listitem>
     <para>
      &productname; is a dedicated cluster operating system and does not
      support dual-booting with other operating systems. Ensure that all drives
      in all cluster nodes are empty and contain no other operating systems
      before beginning installation.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 </chapter>
